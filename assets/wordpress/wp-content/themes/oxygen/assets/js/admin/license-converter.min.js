!function(){"use strict";document.addEventListener("DOMContentLoaded",(function(){const e=document.querySelector(".license-converter form"),t=e.querySelector("button[type=submit]"),n=t.textContent,c="license-converter--is-loading",a=a=>{const o=e.querySelector(".form-field"),s=document.createElement("div");s.classList.add("notice","notice-error"),s.innerHTML="<p>".concat(a,"</p>"),o.parentNode.insertBefore(s,o),t.textContent=n,e.classList.remove(c)},o=()=>{var n;const o={action:"theme_license_convert",email:e.querySelector("#email").value,purchaseCode:e.querySelector("#purchase-code").value};null===(n=e.querySelector(".notice"))||void 0===n||n.remove(),e.classList.add(c),t.textContent="Validating purchase code...",fetch(ajaxurl,{method:"POST",body:new URLSearchParams(o)}).then((e=>e.json())).then((n=>{if(n.success){const o=n.data;t.textContent="Activating theme...",fetch(ajaxurl,{method:"POST",body:new URLSearchParams({action:"theme_license_activation_details"})}).then((e=>e.json())).then((n=>{n.success?fetch(n.ajax_url,{method:"POST",body:new URLSearchParams({action:n.ajax_action,security:n.security,license_key:o,module_id:n.module_id})}).then((e=>e.json())).then((n=>{if(n.success)t.textContent="Theme has been activated successfully. Redirecting...",e.classList.remove(c),null!=n&&n.next_page&&setTimeout((()=>{window.location.href=n.next_page}),5e3);else{const e=document.createElement("div");e.appendChild(document.createTextNode(o)),a("Could not activate theme license! Copy the license key and try activating manually <strong>"+e.innerHTML+"</strong>")}})):a(n.data.message)}))}else a(n.data.message)}))};e&&e.addEventListener("submit",(t=>{t.preventDefault(),e.checkValidity()&&o()}))}))}();